<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papua New Guinea Infrastructure: Challenges & Future</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Application Structure Plan: 
        1. Header: Title.
        2. Navigation Bar: Links to key sections (National Vision, Sector Deep Dives for Transport, Energy, ICT, WASH, Cross-Cutting Themes, Path Forward).
        3. Introduction Section: Brief overview of PNG's infrastructure challenge based on report intro.
        4. National Vision & Strategies Section: MTDP IV goals, Connect PNG summary (stats, key corridors), Digital Transformation (SevisPass highlights).
        5. Sector Deep Dive Section (Tabbed or Accordion for usability):
            - Transport: Roads (condition, backlog), Ports (key upgrades), Aviation (key investments).
            - Energy: Access rates, generation mix, PPL challenges.
            - ICT: Penetration rates, affordability, key projects.
            - WASH: Access rates, key challenges.
        6. Cross-Cutting Themes Section: Funding (domestic/international, PPP focus), Climate Resilience (NAP, key vulnerabilities), SOE Reform (KCH role conceptual diagram).
        7. The Path Forward Section: Opportunities, Risks, and key recommendations from the report.
        8. Footer: Source attribution.
        This structure is chosen to provide a clear, thematic exploration of the report's content, moving from high-level strategy to sectoral details, cross-cutting issues, and finally, the outlook. It prioritises user navigation and understanding over strictly mirroring the report's linear chapter flow.
    -->
    <!-- Visualization & Content Choices:
        - MTDP IV Goals: Inform -> Big Number Stats (HTML/CSS) -> Quick overview of national ambition.
        - Connect PNG Progress/Targets: Inform -> Big Number Stats / Progress Bar (HTML/CSS) -> Highlights scale and progress.
        - Digital ID (SevisPass) Impact: Inform -> Big Number Stats (HTML/CSS) -> Shows potential of digital infra.
        - Road Condition: Compare/Inform -> Donut Chart (Chart.js) -> Visualises poor state of roads.
        - Road Maintenance Backlog: Inform -> Big Number Stat (HTML/CSS) -> Emphasises financial challenge.
        - Energy Access: Compare/Inform -> Donut Chart (Chart.js) -> Shows low electrification.
        - Energy Generation Mix: Compare -> Pie Chart (Chart.js) -> Illustrates reliance on different sources.
        - ICT Penetration (Internet/Mobile): Compare/Inform -> Donut Charts (Chart.js) -> Shows digital divide.
        - ICT Affordability: Compare -> Bar Chart (Chart.js) -> Highlights cost barrier.
        - WASH Access (Water/Sanitation): Compare/Inform -> Donut Charts (Chart.js) -> Shows critical service gaps.
        - Funding Sources (Illustrative): Compare -> Stacked Bar/Grouped Bar (Chart.js) -> Shows mix of funding (conceptual, data permitting).
        - SOE Reform (KCH Oversight): Organize -> Simple Flowchart (HTML/CSS using Tailwind, Unicode arrows) -> Explains governance structure.
        - Opportunities/Risks: Organize -> Styled Lists (HTML/CSS) -> Summarises key takeaways.
        All textual content will be concise summaries derived from the report. Interactions will include navigation clicks and hovers for emphasis. No SVG/Mermaid.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7; /* Warm Off-White */
            color: #4A4A4A; /* Dark Grey */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px; /* Slightly smaller for better grid fit */
            margin-left: auto;
            margin-right: auto;
            height: 280px; 
            max-height: 320px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .nav-link {
            padding: 0.5rem 1rem;
            color: #4A4A4A;
            border-radius: 0.375rem;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-weight: 500;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #D4A373; /* Earthy Tan */
            color: #FDFBF7;
        }
        .section-title {
            font-size: 1.75rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #D4A373; /* Earthy Tan */
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #E76F51; /* Terracotta - subtle accent */
        }
        .card {
            background-color: #FFFFFF;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-3px);
        }
        .stat-value {
            font-size: 2.5rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #E76F51; /* Terracotta */
            line-height: 1.1;
        }
        .stat-label {
            font-size: 0.875rem; /* text-sm */
            color: #A98467; /* Muted Brown */
            margin-top: 0.25rem;
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: border-color 0.3s ease, color 0.3s ease;
            font-weight: 500;
        }
        .tab-button.active {
            border-color: #E76F51; /* Terracotta */
            color: #D4A373; /* Earthy Tan */
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .flowchart-step {
            background-color: #F0EFEB; /* Lighter warm neutral */
            border: 1px solid #D4A373;
            padding: 0.75rem;
            border-radius: 0.375rem; /* rounded-md */
            text-align: center;
        }
        .flowchart-arrow {
            font-size: 1.5rem; /* text-2xl */
            color: #A98467; /* Muted Brown */
            margin: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-[#A98467] text-white py-6 shadow-md">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-3xl md:text-4xl font-bold">Papua New Guinea's Infrastructure</h1>
            <p class="text-lg md:text-xl opacity-90">Challenges, Developments, and the Path Forward (Post-2015)</p>
        </div>
    </header>

    <nav id="mainNav" class="bg-[#F0EFEB] shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6">
            <div class="flex justify-center items-center py-3 space-x-1 md:space-x-3 overflow-x-auto">
                <a href="#introduction" class="nav-link">Intro</a>
                <a href="#national-strategies" class="nav-link">Strategies</a>
                <a href="#sector-deep-dive" class="nav-link">Sectors</a>
                <a href="#cross-cutting-themes" class="nav-link">Themes</a>
                <a href="#path-forward" class="nav-link">Outlook</a>
            </div>
        </div>
    </nav>

    <main class="container mx-auto p-6 md:p-8">

        <section id="introduction" class="mb-12 scroll-mt-20">
            <h2 class="section-title">Understanding the Landscape</h2>
            <div class="card">
                <p class="text-lg leading-relaxed text-gray-700">
                    Since 2015-2016, Papua New Guinea has faced a significant infrastructure deficit across vital economic and social sectors. This interactive summary explores the developments, persistent challenges, and strategic responses in PNG's journey to build a more resilient and prosperous future. The nation grapples with impacts from commodity price volatility, a rapidly growing population, and vulnerability to natural disasters, while simultaneously pursuing ambitious reforms and digital transformation.
                </p>
            </div>
        </section>

        <section id="national-strategies" class="mb-12 scroll-mt-20">
            <h2 class="section-title">National Vision & Key Strategies</h2>
            <p class="text-gray-600 mb-6">PNG's infrastructure development is guided by long-term visions and medium-term plans, focusing on connectivity, economic growth, and modernisation.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="card text-center">
                    <h3 class="text-xl font-semibold text-[#A98467] mb-2">MTDP IV Economic Goal</h3>
                    <p class="stat-value">K200 Bn</p>
                    <p class="stat-label">Target GDP by 2030</p>
                </div>
                <div class="card text-center">
                    <h3 class="text-xl font-semibold text-[#A98467] mb-2">MTDP IV Job Creation</h3>
                    <p class="stat-value">1 Million</p>
                    <p class="stat-label">Additional jobs target</p>
                </div>
                <div class="card text-center">
                    <h3 class="text-xl font-semibold text-[#A98467] mb-2">SevisPass Digital ID Impact</h3>
                    <p class="stat-value">3-5%</p>
                    <p class="stat-label">Projected GDP Increase</p>
                </div>
            </div>
            <div class="card mt-6">
                <h3 class="text-xl font-semibold text-[#A98467] mb-3">"Connect PNG" Programme (2020-2040)</h3>
                <p class="text-gray-700 mb-4">A multi-phased initiative to link all 22 provinces to the national highway network. Key objectives include:</p>
                <ul class="list-disc list-inside text-gray-700 space-y-1">
                    <li>Minimum 5.6% of National Budget annually (Connect PNG Act 2021).</li>
                    <li>Phase 1 (2021-2027): Construct 2,500 km new roads; Improve 4,220 km of 16 priority highways.</li>
                    <li>Reported Impacts: 20,000+ jobs, 20% transport cost reduction.</li>
                    <li>Major Challenge: K45 billion road maintenance backlog. A special audit commenced in May 2025.</li>
                </ul>
            </div>
            <div class="card mt-6">
                <h3 class="text-xl font-semibold text-[#A98467] mb-3">Digital Transformation Agenda</h3>
                <p class="text-gray-700">Focuses on modernising government services and enhancing digital inclusion through initiatives like the Digital Government Plan 2023-2027 and the SevisPass Digital ID project. Aims for eKYC, Single Sign-On, and biometric voting by 2027.</p>
            </div>
        </section>

        <section id="sector-deep-dive" class="mb-12 scroll-mt-20">
            <h2 class="section-title">Sector Deep Dives</h2>
            <div class="mb-6 border-b border-gray-300">
                <nav class="flex flex-wrap -mb-px" id="sectorTabs">
                    <button class="tab-button active" data-tab="transport">Transport</button>
                    <button class="tab-button" data-tab="energy">Energy</button>
                    <button class="tab-button" data-tab="ict">ICT</button>
                    <button class="tab-button" data-tab="wash">WASH</button>
                </nav>
            </div>

            <div id="transportContent" class="tab-content active">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">Transport Infrastructure</h3>
                <p class="text-gray-600 mb-6">Critical for connectivity in PNG's challenging geography, covering roads, ports, and aviation.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Roads & Bridges</h4>
                        <p class="stat-label">Network Condition (Est. 85% Poor)</p>
                        <div class="chart-container mt-2"><canvas id="roadConditionChart"></canvas></div>
                        <p class="mt-3 text-gray-700">K45 Billion estimated maintenance backlog.</p>
                        <p class="mt-1 text-gray-700 text-sm">Connect PNG is the flagship programme.</p>
                    </div>
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Ports & Maritime</h4>
                        <p class="text-gray-700">Key international ports (Port Moresby, Lae) operated by ICTSI show improved performance. AIFFP funding $95m AUD Kimbe Port upgrade. EU planning Rabaul port investment.</p>
                    </div>
                    <div class="card md:col-span-2">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Aviation</h4>
                        <p class="text-gray-700">CADIP (K1.67bn) for airport upgrades. Air Niugini's NZ$2bn re-fleeting programme (2025-2028) with new Airbus A220s and Boeing 787s (under review). New China Southern Airlines route active.</p>
                    </div>
                </div>
            </div>

            <div id="energyContent" class="tab-content">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">Energy Infrastructure</h3>
                <p class="text-gray-600 mb-6">Focuses on improving access to reliable and affordable electricity, with a shift towards renewable sources.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Electricity Access</h4>
                        <p class="stat-label">On-Grid Access (<15% of Population)</p>
                        <div class="chart-container mt-2"><canvas id="electricityAccessChart"></canvas></div>
                        <p class="mt-3 text-gray-700">Target: 70% access by 2030.</p>
                    </div>
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Generation Mix (On-Grid)</p>
                        <div class="chart-container mt-2"><canvas id="generationMixChart"></canvas></div>
                        <p class="mt-3 text-gray-700">Aim: 78% renewables by 2030. Dominated by Hydro (39.7%) & Diesel (37.4%).</p>
                    </div>
                    <div class="card md:col-span-2">
                         <h4 class="text-lg font-semibold text-[#A98467] mb-3">PNG Power Ltd (PPL) & Reforms</h4>
                         <p class="text-gray-700">PPL faces operational and financial challenges. Reforms underway via KCH and NEA. World Bank NEAT project supports PPL mini-grid modernisation (PPP pilot).</p>
                    </div>
                </div>
            </div>

            <div id="ictContent" class="tab-content">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">Telecommunications & ICT</h3>
                <p class="text-gray-600 mb-6">Aims to increase connectivity, affordability, and leverage digital transformation.</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Internet Penetration</h4>
                        <div class="chart-container mt-2"><canvas id="internetPenetrationChart"></canvas></div>
                        <p class="mt-1 text-center text-gray-700 text-sm">~24.1% (Early 2025, DataReportal)</p>
                    </div>
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Mobile Connections</h4>
                        <div class="chart-container mt-2"><canvas id="mobileConnectionsChart"></canvas></div>
                         <p class="mt-1 text-center text-gray-700 text-sm">~47.2% of population (Early 2025, GSMA)</p>
                    </div>
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Internet Affordability</h4>
                        <p class="stat-value text-xl">12.04%</p>
                        <p class="stat-label">of GNI per capita for low-consumption basket (2024). Target is <2%.</p>
                    </div>
                </div>
                <div class="card mt-6">
                    <h4 class="text-lg font-semibold text-[#A98467] mb-3">Key Developments</h4>
                    <p class="text-gray-700">Submarine cables (CSCS2, KSCN) aim to reduce costs. PNG DataCo building 500 mobile towers. Three MNOs: Digicel, Vodafone, Telikom. Starlink licensed (entry faced review).</p>
                </div>
            </div>

            <div id="washContent" class="tab-content">
                <h3 class="text-2xl font-semibold text-gray-700 mb-4">Water, Sanitation & Hygiene (WASH)</h3>
                <p class="text-gray-600 mb-6">Critically low access to safe water and sanitation poses significant public health challenges.</p>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Improved Drinking Water Access</h4>
                        <div class="chart-container mt-2"><canvas id="waterAccessChart"></canvas></div>
                        <p class="mt-1 text-center text-gray-700 text-sm"><50% of households (DHS 2016-18)</p>
                    </div>
                    <div class="card">
                        <h4 class="text-lg font-semibold text-[#A98467] mb-3">Improved Sanitation Access</h4>
                        <div class="chart-container mt-2"><canvas id="sanitationAccessChart"></canvas></div>
                        <p class="mt-1 text-center text-gray-700 text-sm">~29% of households (DHS 2016-18)</p>
                    </div>
                </div>
                <div class="card mt-6">
                    <h4 class="text-lg font-semibold text-[#A98467] mb-3">Key Challenges & Initiatives</h4>
                    <p class="text-gray-700">Challenges: Low investment, high Non-Revenue Water (~52% for Water PNG), aging infrastructure, land tenure. Initiatives: World Bank WSSDP, Water PNG plans for Port Moresby, Korea-UNICEF partnership.</p>
                </div>
            </div>
        </section>

        <section id="cross-cutting-themes" class="mb-12 scroll-mt-20">
            <h2 class="section-title">Cross-Cutting Themes & Enablers</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card">
                    <h3 class="text-xl font-semibold text-[#A98467] mb-3">Funding & Investment</h3>
                    <p class="text-gray-700 mb-2">K7.6 billion infrastructure budget for 2025 (273% increase from 2018). Strong reliance on international partners (ADB, World Bank, Australia, EU, China).</p>
                    <p class="text-gray-700 font-medium">Public-Private Partnerships (PPPs):</p>
                    <p class="text-gray-700 text-sm">Framework strengthened (PPP Act, Regulations). PPP Centre being established. Focus on value for money, risk allocation, and community benefit. Challenges: domestic market depth, institutional capacity.</p>
                </div>
                <div class="card">
                    <h3 class="text-xl font-semibold text-[#A98467] mb-3">Climate Resilience</h3>
                    <p class="text-gray-700">PNG is highly vulnerable. National Adaptation Plan (NAP) prioritises transport & infrastructure. DoWH Corporate Plan includes climate-resilient roads. Green Finance Centre aims to mobilise climate finance.</p>
                </div>
            </div>
            <div class="card mt-6">
                <h3 class="text-xl font-semibold text-[#A98467] mb-3 text-center">SOE Reform: Kumul Consolidated Holdings (KCH) Oversight</h3>
                <div class="flex flex-col items-center space-y-2 md:space-y-0 md:flex-row md:justify-around md:items-start mt-4 px-4">
                    <div class="flowchart-step">SOE Ownership Policy (2020) & KCH Act Amendment (2021)</div>
                    <div class="flowchart-arrow self-center hidden md:block">&rarr;</div>
                    <div class="flowchart-arrow self-center md:hidden">&darr;</div>
                    <div class="flowchart-step bg-[#DDE5B6] border-[#ADC178]">Kumul Consolidated Holdings (KCH) <p class="text-xs">(Primary Oversight)</p></div>
                    <div class="flowchart-arrow self-center hidden md:block">&rarr;</div>
                    <div class="flowchart-arrow self-center md:hidden">&darr;</div>
                    <div class="flowchart-step">State-Owned Enterprises (PPL, Air Niugini, etc.) <p class="text-xs">(Develop Corporate Plans)</p></div>
                </div>
                <p class="text-sm text-gray-600 text-center mt-3">Aim: Transform SOEs into profitable, efficient service providers.</p>
            </div>
        </section>

        <section id="path-forward" class="mb-12 scroll-mt-20">
            <h2 class="section-title">The Path Forward: Opportunities & Risks</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="card border-l-4 border-[#ADC178]">
                    <h3 class="text-xl font-semibold text-[#ADC178] mb-3">Opportunities</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Strategic National Programmes (Connect PNG, Digital Transformation).</li>
                        <li>Resource sector linkages for economic diversification.</li>
                        <li>SOE Reforms and strengthened PPP framework.</li>
                        <li>Abundant Renewable Energy Potential.</li>
                        <li>Strong International Partnerships.</li>
                    </ul>
                </div>
                <div class="card border-l-4 border-[#E76F51]">
                    <h3 class="text-xl font-semibold text-[#E76F51] mb-3">Potential Risks</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Funding sustainability & maintenance backlogs.</li>
                        <li>Governance, transparency, and corruption.</li>
                        <li>Institutional and human capacity constraints.</li>
                        <li>Land tenure complexity.</li>
                        <li>Climate change and natural disasters.</li>
                        <li>SOE underperformance and financial instability.</li>
                    </ul>
                </div>
            </div>
            <div class="card mt-6">
                <h3 class="text-xl font-semibold text-[#A98467] mb-3">Key Recommendations Summary</h3>
                <p class="text-gray-700">Success requires robust governance, transparent procurement, sustainable funding (including for maintenance), capacity building, effective land tenure management, comprehensive climate resilience, and a focus on equitable benefit distribution for all citizens.</p>
            </div>
        </section>
    </main>

    <footer class="bg-[#4A4A4A] text-[#FDFBF7] py-8 mt-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-sm">Interactive application based on the report: "INFRASTRUCTURE CHALLENGES FOR PAPUA NEW GUINEAâ€™S FUTURE: AN UPDATED ASSESSMENT (Post-2015 Developments)".</p>
            <p class="text-xs mt-1 opacity-80">This is a visual summary and interpretation for informational purposes.</p>
        </div>
    </footer>

    <script>
        // Helper function to wrap labels for Chart.js
        function wrapChartLabel(str, maxWidth) {
            const words = str.split(' ');
            let currentLine = '';
            const lines = [];
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            if (currentLine.trim().length > 0) {
                lines.push(currentLine.trim());
            }
            return lines.length > 0 ? lines : [str]; // Return array of strings or original string if not wrapped
        }

        // Default Chart.js options including tooltip callback
        const defaultChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { 
                        color: '#4A4A4A', 
                        font: { size: 11 },
                        padding: 15
                    }
                },
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            if (!item) return '';
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            },
            scales: {
                y: { ticks: { color: '#4A4A4A', font: { size: 10 } }, grid: { color: '#EEEAE6' } },
                x: { ticks: { color: '#4A4A4A', font: { size: 10 } }, grid: { display: false } }
            }
        };
        
        const chartColors = {
            brown: '#A98467',
            sageGreen: '#ADC178',
            lightOlive: '#DDE5B6',
            terracotta: '#E76F51',
            darkGrey: '#4A4A4A',
            offWhite: '#FDFBF7'
        };

        // Chart Initializations
        // Road Condition Chart
        const roadConditionCtx = document.getElementById('roadConditionChart')?.getContext('2d');
        if (roadConditionCtx) {
            new Chart(roadConditionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Poor Condition', 'Fair/Good'],
                    datasets: [{
                        data: [85, 15], // 85% poor
                        backgroundColor: [chartColors.terracotta, chartColors.sageGreen],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Electricity Access Chart
        const electricityAccessCtx = document.getElementById('electricityAccessChart')?.getContext('2d');
        if (electricityAccessCtx) {
            new Chart(electricityAccessCtx, {
                type: 'doughnut',
                data: {
                    labels: ['On-Grid Access', 'No On-Grid Access'],
                    datasets: [{
                        data: [15, 85], // <15% on-grid access
                        backgroundColor: [chartColors.sageGreen, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Generation Mix Chart
        const generationMixCtx = document.getElementById('generationMixChart')?.getContext('2d');
        if (generationMixCtx) {
            new Chart(generationMixCtx, {
                type: 'pie',
                data: {
                    labels: [wrapChartLabel('Hydropower (39.7%)', 16), wrapChartLabel('Diesel (37.4%)', 16), wrapChartLabel('Fossil Gas (14.1%)', 16), wrapChartLabel('Geothermal (9.1%)', 16), wrapChartLabel('Solar (~1%)',16)],
                    datasets: [{
                        data: [39.7, 37.4, 14.1, 9.1, 1.0],
                        backgroundColor: [chartColors.brown, chartColors.terracotta, chartColors.darkGrey, chartColors.sageGreen, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, plugins: { ...defaultChartOptions.plugins, legend: { position: 'right', labels: {...defaultChartOptions.plugins.legend.labels, boxWidth: 12, padding:10, font: {size: 9}}}}}
            });
        }
        
        // Internet Penetration Chart
        const internetPenetrationCtx = document.getElementById('internetPenetrationChart')?.getContext('2d');
        if (internetPenetrationCtx) {
            new Chart(internetPenetrationCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Internet Users', 'Offline Population'],
                    datasets: [{
                        data: [24.1, 75.9], // ~24.1% Early 2025
                        backgroundColor: [chartColors.sageGreen, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Mobile Connections Chart
        const mobileConnectionsCtx = document.getElementById('mobileConnectionsChart')?.getContext('2d');
        if (mobileConnectionsCtx) {
            new Chart(mobileConnectionsCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Mobile Connections', 'No Connection'],
                    datasets: [{
                        data: [47.2, 52.8], // ~47.2% Early 2025
                        backgroundColor: [chartColors.brown, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Water Access Chart
        const waterAccessCtx = document.getElementById('waterAccessChart')?.getContext('2d');
        if (waterAccessCtx) {
            new Chart(waterAccessCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Improved Water', 'Unimproved'],
                    datasets: [{
                        data: [45, 55], // Using <50%, e.g., 45% for visual
                        backgroundColor: [chartColors.sageGreen, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Sanitation Access Chart
        const sanitationAccessCtx = document.getElementById('sanitationAccessChart')?.getContext('2d');
        if (sanitationAccessCtx) {
            new Chart(sanitationAccessCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Improved Sanitation', 'Unimproved/Open'],
                    datasets: [{
                        data: [29, 71], // ~29%
                        backgroundColor: [chartColors.terracotta, chartColors.lightOlive],
                        borderColor: chartColors.offWhite,
                        borderWidth: 2
                    }]
                },
                options: {...defaultChartOptions, cutout: '60%'}
            });
        }

        // Tab Functionality
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        const sectorTabsContainer = document.getElementById('sectorTabs');

        if (sectorTabsContainer) {
            sectorTabsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('tab-button')) {
                    const tabId = e.target.dataset.tab;

                    tabButtons.forEach(button => button.classList.remove('active'));
                    e.target.classList.add('active');

                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `${tabId}Content`) {
                            content.classList.add('active');
                        }
                    });
                }
            });
        }

        // Smooth scroll for navigation links & active state
        document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        const navLinks = document.querySelectorAll('#mainNav .nav-link');
        const sections = document.querySelectorAll('main section');

        function changeNavActiveState() {
            let index = sections.length;
            while(--index && window.scrollY + 100 < sections[index].offsetTop) {} // 100px offset
            
            navLinks.forEach((link) => link.classList.remove('active'));
            if (index >= 0 && navLinks[index]) { // Check if navLinks[index] exists
                 navLinks[index].classList.add('active');
            }
        }
        changeNavActiveState(); // Initial call
        window.addEventListener('scroll', changeNavActiveState);

    </script>
</body>
</html>
